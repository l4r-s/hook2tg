name = "hook2tg"
compatibility_date = "2025-12-28"
main = "src/index.ts"

# KV Namespace for webhook and organization registration
# For local development: Create with `wrangler kv:namespace create WEBHOOK_KV`
# For production: Set CLOUDFLARE_KV_NAMESPACE_ID in GitHub secrets
[[kv_namespaces]]
binding = "WEBHOOK_KV"
id = "PUT_YOUR_KV_NAMESPACE_ID_HERE"

# Durable Object binding
[durable_objects]
  [[durable_objects.bindings]]
  name = "RATE_LIMITER"
  class_name = "RateLimiter"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_sqlite_classes = ["RateLimiter"]

# observability logs
[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true
